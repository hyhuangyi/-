<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="cn.dao.UserDao">
	<insert id="saveUser"
		parameterType="cn.entity.User">
		insert into user
			(id,
			user_name,
			user_password,
			user_nick)
		values
			(#{id}, #{name}, #{password},
			 #{nick})
	</insert>
	
	<!-- User findUserById(String id) -->
	<select id="findUserById"
		parameterType="string"
		resultType="cn.entity.User">
		select 
			id as id,  
			user_name as name,
			user_password as password,
			user_nick as nick
		from 
			user
		where
			id=#{id}
	</select>	
	
	<select id="findUserByName"
		parameterType="string"
		resultType="cn.entity.User">
		select 
			id as id,  
			user_name as name,
			user_password as password,
			user_nick as nick
		from 
			user
		where
			user_name=#{name}
		
	</select>	
	
	<update id="updateUser"
		parameterType="map">
		update 
			user
		set
			<trim suffixOverrides=",">
				<if test="password != null">
					user_password=#{password},
				</if>
				<if test="nick != null">
					user_nick=#{nick}
				</if>
			</trim>
		where
			id=#{id}
	</update>
</mapper>







